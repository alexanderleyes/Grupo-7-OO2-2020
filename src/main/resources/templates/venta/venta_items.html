<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta content="width=device-width, initial-scale=1.0" name="viewport">
		<title>TPC - Items</title>
		<meta content="" name="descriptison">
		<meta content="" name="keywords">
		<!-- Favicons -->
		<link href="../../img/favicon.png" rel="icon">
		<link href="../../img/apple-touch-icon.png" rel="apple-touch-icon">
		<!-- Google Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
		<!-- Vendor CSS Files -->
		<link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link href="../vendor/icofont/icofont.min.css" rel="stylesheet">
		<link href="../vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
		<link href="../vendor/venobox/venobox.css" rel="stylesheet">
		<link href="../vendor/owl.carousel/../owl.carousel.min.css" rel="stylesheet">
		<link href="../vendor/aos/aos.css" rel="stylesheet">
		<!-- Template Main CSS File -->
		<link href="../css/style.css" rel="stylesheet">
		<!-- =======================================================
			* Template Name: iPortfolio - v1.2.1
			* Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
			* Author: BootstrapMade.com
			* License: https://bootstrapmade.com/license/
			======================================================== -->
	</head>
	<body>
		<!-- ======= Mobile nav toggle button ======= -->
		<button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>
		<!-- ======= Header ======= -->
		<header id="header">
			<!-- NAV-MENU!!!!! --> 
			<div th:insert="fragments/nav_menu :: nav_menu">  </div>
		</header>
		<!-- End Header -->
		<main id="main">
			<!-- ======= Breadcrumbs ======= -->
			<section id="breadcrumbs" class="breadcrumbs">
				<div class="container">
					<div class="d-flex justify-content-between align-items-center">
						<h2> Datos de la Venta</h2>
						<ol>
							<li><a th:href="@{/home}">Home</a></li>
						</ol>
					</div>
					<!--        //"btn btn-primary" -->
					<br><br>
					<div class="form-row" >
						<div class="form-group col-md-6">
							<h2><b>Vendedor:  </b><span th:text=${venta.vendedor.apellido} />, <span th:text=${venta.vendedor.nombre}/></h2>
						</div>
						<div class="form-group col-md-6">
							<h2><b>Sucursal: </b><span th:text=${venta.sucursal.idSucursal}/> - <span th:text=${venta.sucursal.direccion}/></h2>
						</div>
						<div class="form-group col-md-6">
							<h2><b>Cliente:  </b><span th:text=${venta.cliente.apellido}/>, <span th:text=${venta.cliente.nombre}/></h2>
						</div>
					</div>
					<br><br><br>
					<form th:object="${item}" method="post" role="form" >
						<div class="form-row" >
							<div class="form-group col-md-6">
								<label for="name">Producto</label>		     
								<select class="form-control"  th:field="*{producto.idProducto}" id="producto">
									<br>
									<option th:each="p : ${productos}"  th:value="${(p.idProducto)}" th:text="${p.descripcion}"/>		         	
								</select>
							</div>
							<div class="form-group col-md-6">
								<label for="name">Cantidad</label>
								<input type="number" min="0" step="1" th:field="*{cantidad}" class="form-control"  id="cantidad"palceholder="4"/>
								<div class="validate"></div>
							</div>
						</div>
					</form>
					<div class="text-left"><input type="button" class="add-row" value="Agregar"></div>
					<form th:action="@{/venta/revisa}" method="post" role="form">
						<table class="table" id="table"  >
							<thead>
								<tr >
									<th>ID </th>
									<th>Producto</th>
									<th>Cantidad </th>
									<th> </th>
									<th> </th>
								</tr>
							</thead>
							<tbody>	
							</tbody>
						</table>
					</form>
					<form th:action="@{/venta/revisa}" method="post" role="form" >
						<input name="vend" type="hidden" th:field="${venta.vendedor.idVendedor}">
						<input name="suc" type="hidden" th:field="${venta.sucursal.idSucursal}">
						<input name="cli" type="hidden" th:field="${venta.cliente.idPersona}">
						<input name="est" type="hidden" th:field="${venta.estado.idEstadoVenta}">
												
						<input id="ids" name="ids" type="hidden" th:field="${vtaItems.ids}">
						<input id="cnt" name="cnt" type="hidden" th:field="${vtaItems.cnt}">
						<input type="submit" id=btnRecorrer class="btn btn-primary" onclick="recorrerItems();" />
					</form>
					<br><br><br>
				</div>
			</section>
			<!-- End Breadcrumbs -->
			<!-- ======= Portfolio Details Section ======= -->
			<section id="portfolio-details" class="portfolio-details">
				<div class="container">
					<div class="portfolio-details-container">
						<!--           <div class="owl-carousel portfolio-details-carousel"> -->
						<!--             <img src="../img/portfolio-details-1.jpg" class="img-fluid" alt=""> -->
						<!--             <img src="../img/portfolio-details-2.jpg" class="img-fluid" alt=""> -->
						<!--             <img src="../img/portfolio-details-3.jpg" class="img-fluid" alt=""> -->
						<!--           </div> -->
						<div class="portfolio-info">
							<h3>Project information</h3>
							<ul>
								<li><strong>Category</strong>: OO2"</li>
								<li><strong>Client</strong>: ASU Company</li>
								<li><strong>Project date</strong>: 01 March, 2020</li>
								<li><strong>Project URL</strong>: <a href="#">www.example.com</a></li>
							</ul>
						</div>
					</div>
					<div class="portfolio-description">
						<h2>This is an example of portfolio detail</h2>
						<p>
							Autem ipsum nam porro corporis rerum. Quis eos dolorem eos itaque inventore commodi labore quia quia. Exercitationem repudiandae officiis neque suscipit non officia eaque itaque enim. Voluptatem officia accusantium nesciunt est omnis tempora consectetur dignissimos. Sequi nulla at esse enim cum deserunt eius.
						</p>
					</div>
				</div>
			</section>
			<!-- End Portfolio Details Section -->
		</main>
		<!-- End #main -->
		<!-- ======= Footer ======= -->
		<footer id="footer">
			<div class="container">
				<div class="copyright">
					&copy; Copyright <strong><span>iPortfolio</span></strong>
				</div>
				<div class="credits">
					<!-- All the links in the footer should remain intact. -->
					<!-- You can delete the links only if you purchased the pro version. -->
					<!-- Licensing information: https://bootstrapmade.com/license/ -->
					<!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/ -->
					Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
				</div>
			</div>
		</footer>
		<!-- End  Footer -->
		<a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>
		<!-- Vendor JS Files -->
		<script src="../vendor/jquery/jquery.min.js"></script>
		<script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
		<script src="../vendor/jquery.easing/jquery.easing.min.js"></script>
		<script src="../vendor/php-email-form/validate.js"></script>
		<script src="../vendor/waypoints/jquery.waypoints.min.js"></script>
		<script src="../vendor/counterup/counterup.min.js"></script>
		<script src="../vendor/isotope-layout/isotope.pkgd.min.js"></script>
		<script src="../vendor/venobox/venobox.min.js"></script>
		<!--   <script src="../vendor/owl.carousel/owl.carousel.min.js"></script> -->
		<script src="../vendor/typed.js/typed.min.js"></script>
		<script src="../vendor/aos/aos.js"></script>
		<!-- Template Main JS File -->
		<script src="../js/main.js"></script>
		<script>
			$(document).ready(function(){
			       $(".add-row").click(function(){
			           var id =  $("#producto").val();
			           var producto =  $("#producto option:selected").text();
			           var cantidad =  $("#cantidad").val();
			           if(cantidad > 0 ){            	
			           
			           	var markup = "<tr><td>" + id + "</td><td>" + producto + "</td><td> " + cantidad + "</td></tr> ";
			           $("table tbody").append(markup);
			           }
			       });
			       
			       // Find and remove selected table rows
			       $(".delete-row").click(function(){
			           $("table tbody").find('input[id="record"]').each(function(){
			               if($(this).is(":checked")){
			                   $(this).parents("tr").remove();
			               }
			           });
			       });
			   });    
			
			
			function recorrerItems() {
			var ids = '' 
			var cnt = ''
			
				for(var i=0; i<table.rows.length; i++)	{
					
				if (i != 0){							
					ids = ids + '_' + table.rows[i].cells[0].innerHTML
						cnt = cnt + '_' + table.rows[i].cells[2].innerHTML
				}			
					console.log(ids)
					console.log(cnt)
				$("#ids").val(ids)
				$("#cnt").val(cnt)
				
				}
			}	
			
		</script>
	</body>
</html>