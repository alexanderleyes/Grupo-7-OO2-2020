package negocio;
import java.time.LocalDate;
import java.util.List;

import dao.PersonaDao;
import datos.Persona;


public class PersonaABM {
	
	PersonaDao dao = new PersonaDao();
	
	public List<Persona> traer(){
		return dao.traer();
	}	
	
	public Persona traer(long idPersona) {
		Persona c = dao.traer(idPersona);
		return c;
	}

	public Persona traer(int dni) {
		Persona c = dao.traer(dni);
		return c;
	}

	public int agregar(String nombre, String apellido, LocalDate fechaNacimiento, int dni)  throws Exception {
	
		if (dao.traer(dni) != null) {
			throw new Exception("Ya existe un Persona con DNI: " + dni);			
		} else {
			Persona p = new Persona(apellido, nombre, fechaNacimiento, dni);
			return dao.agregar(p);
		}			
	}
	
	public void modificar(Persona p) throws Exception {	
		Persona pAux = null;
		pAux = dao.traer(p.getDni());		
		
		if (pAux != null){
			if (pAux.getIdPersona() == p.getIdPersona()){
				throw new Exception("Es el mismo DNI!!!");
			}
			throw new Exception("Ya existe otro usuario con el DNI: " + p.getDni());
		}else {
			dao.actualizar(p);
		}			
	}

	public void eliminar(long idPersona) throws Exception{
		Persona p = null;
		p = dao.traer(idPersona);		 
		if (p == null) {
			throw new Exception("No se puede eliminar, no existe Persona con ID: " + idPersona);
		}else {
			dao.eliminar(p);
		}		
	}	
	
	
}
